
<!DOCTYPE html>

<head>
    <meta charset="utf-8">
    
<meta name="SiteName" content="智慧国际机场"/>
<meta name="SiteIDCode" content="N000014366"/>

<meta name="others" content="页面生成时间 2023-03-30 14:44:58" />
<title>智慧国际机场</title>
    <meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <link rel="stylesheet" href="/sfsairport/xhtml/css/common.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="/sfsairport/xhtml/css/swiper.min.css" />
    <link rel="stylesheet" href="/sfsairport/xhtml/css/aos.css" />
    <link rel="stylesheet" href="/sfsairport/xhtml/./layui/css/layui.css" />
    <link rel="stylesheet" href="/sfsairport/xhtml/css/layui-theme-custom.css" />
    <link rel="stylesheet" href="/sfsairport/xhtml/css/jquery.mmenu.all.css" />
    <link rel="stylesheet" href="/sfsairport/xhtml/css/jquery.mCustomScrollbar.css" />
    <link rel="stylesheet" href="/sfsairport/xhtml/css/jquery.running.css" />
    <link rel="stylesheet" href="/sfsairport/xhtml/css/newcss.css" />
    <link rel="stylesheet" href="/sfsairport/xhtml/css/xunpan.css" />
    <link rel="stylesheet" href="/sfsairport/xhtml/css/style.css" />
    <link rel="stylesheet" href="/sfsairport/xhtml/css/others.css" />

    <script type="text/javascript" src="/sfsairport/xhtml/js/jquery.min.js"></script>
    <script type="text/javascript" src="/sfsairport/xhtml/js/swiper.min.js"></script>
    <script type="text/javascript" src="/sfsairport/xhtml/js/layer/layer.js"></script>
    <script type="text/javascript" src="/sfsairport/xhtml/js/imagesloaded.pkgd.min.js"></script>
    <script type="text/javascript" src="/sfsairport/xhtml/js/jquery.mmenu.min.all.js"></script>
    <script type="text/javascript" src="/sfsairport/xhtml/js/jquery.running.min.js"></script>
    <script type="text/javascript" src="/sfsairport/xhtml/./layui/layui.js"></script>
    <script src="/sfsairport/xhtml/js/common.js?v=202"></script>
    <script src="/sfsairport/xhtml/js/airline.js"></script>

 

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <link rel="stylesheet" type="text/css" href="./login/login.css">

         <meta name="siteCode" content="sfsairport">
    

         <style>
            .fade-in {
                opacity: 0;
                transition: opacity 0.5s ease-in;
            }

            .fade-in.active {
                opacity: 1;
            }
         </style>
<!-- 网站变灰色 start -->
<!--
<style type="text/css">
  html,body{
    /* 滤镜效果 */
   
    filter: grayscale(100%);
   
    /* webkit内核 */
   
    -webkit-filter: grayscale(100%);
   
    /* 火狐内核 */
   
  -moz-filter: grayscale(100%);
   
    /* 微软内核 */
   
    -ms-filter: grayscale(100%);
   
    /* 欧朋内核 */
   
    -o-filter: grayscale(100%);
   
    /* ie专有滤镜 */
      
      filter:gray;
  }
</style>
-->
<!-- 网站变灰色 start -->

<style>

</style>

</head>

<body>
    <div class="overlay"></div>
    <div id="page">
        <header class="header">
            <script type="text/javascript" src="/sfsairport/xhtml/./layui/layui.js"></script>
<div class="header-top inner-20">
    <div class="m-width-1400 fixed">
        <div class="left-text fixed">
            <div class="scoll-text">
                <div class="swiper-container">
                    <div class="swiper-wrapper">
                      <div class="swiper-slide">
                        <a>欢迎来到智慧航空管理系统,很高兴为您服务</a>
                      </div>              
                </div>
            </div>
            </div>
        </div>
        <div class="top-lx">
            该项目制作组：
            <a>
                吴承旭、马天扬、金俊河、张朋达、张志韩
            </a>
        </div>
    </div>
</div>
<!-- top--end -->





<div class="header-box m-width-1400 fixed ">
    <div class="inner-20">
        <!-- <div class="hover-search">
            
        </div> -->


        <div class="logo">
            <a href="/sfsairport/index.html">
                <!-- <img src="/sfsairport/xhtml/./images/logo.svg"> -->
                <img src="/sfsairport/xhtml/./images/layer-logo.png">
                <!--  -->
                <!-- <img src="/sfsairport/xhtml/./images/logo-ny.svg" class="wap-logo"> -->
                <img src="/sfsairport/xhtml/./images/layer-logo.png" class="wap-logo">
            </a>
        </div>

        <div class="nav-right fixed">
            
            <div class="sear" id="Login">
                <button class="btnLogin-popup">登录</button>
            </div>
            
            <div class="top-notice">
                <div class="typename"></div>
                
            </div>
            
        </div>
        <div class="wrapper">
            <span class="icon-close">
                <ion-icon name="close-outline"></ion-icon>
            </span>
            <div class="form-box login">
                <h2>登录</h2>
                <form action="#" id="form-login">
                    <div class="input-box inputBoxId">
                        <input id="LOGIN_ID"  type="text" required oninput="clearValidationStyles(this)">
                        <label id="LOGIN_ID_LABEL">username</label>
                    </div>
                    <div class="input-box inputBoxPw">
                        <input id="LOGIN_PW" type="password" required oninput="clearValidationStyles(this)">
                        <label id="LOGIN_PW_LABEL">password</label>
                    </div> 
                    <div class="remember-forgot">
                        <div>没有账号？</div>
                        <a href="#" id="register-link">注册</a>
                    </div>
                    <button id="LOGIN_BTN" type="button" class="btn">登录</button>
                    <h4 class="LoginLabel"></h4>
                </form>
            </div>
            <div class="form-box register">
                <h2>注册</h2>
                <form action="#" id="form-register"> 
                    <div class="input-box RegIdBox">
                        <input id="REGISTER_ID"  type="text" required oninput="clearValidationStyles(this)">
                        <label>username</label>
                    </div>
                    <div class="input-box RegPwBox">
                        <input id="REGISTER_PW" type="password" required oninput="clearValidationStyles(this)">
                        <label>password</label> 
                    </div> 
                    
                    <div class="input-box RegEmBox">
                        <input id="REGISTER_EMAIL" type="text" required oninput="clearValidationStyles(this)">
                        <label>email</label>
                    </div>
                    <div class="input-box RegTyBox">
                        <select id="REGISTER_TYPE" name="type" required>
                          <option value="">Type</option>
                          <option value="旅客">旅客</option>
                          <option value="商家">商家</option>
                          <option value="管理员">管理员</option>
                          <option value="工作人员">工作人员</option>
                          <option value="航空公司">航空公司</option>
                        </select>
                    </div>
                    <div class="remember-forgot">
                        <div>已有账号？</div>
                        <a href="#" class="login-link">登录</a>
                    </div>
                    
                      <button id="REGISTER_BTN" type="button" class="btn">注册</button>
                      <h4 class="RegisterLabel"></h4>
                </form>
            </div>
        </div>

       

    <script src="./login/login.js"></script>
        <!-- nav-right--end -->
        <div class="pc-nav" style="margin-left: 50px;">
            <div class="nav">
                <ul class="fixed">
                    <li><a href="/sfsairport/index.html">首页</a></li>
                    <li><a href="/sfsairport/hbxx/Departure_Arrival.html"  target="_self">航班信息</a>
                        <div class="erji ">
                            <div class="erji-menu fixed">
                                <div class="tit">航班信息</div>
                                <dl>
                                    <dd>
                                        <a href="/sfsairport/hbxx/Departure_Arrival.html"><i class="iconfont icongengduo"></i>出发航班</a>
                                    </dd>
                                    
                                    <dd class="hidegp">
                                        <a href="/sfsairport/gp/Airlines.html"><i class="iconfont icongengduo"></i>购票</a>
                                    </dd>
                                    
                                </dl>
                            </div>
                        </div>
                    </li>
                    <li><a href="/sfsairport/tcczy/dlm_tt.html"  target="_self">停车管理</a>
                        <div class="erji ">
                            <div class="erji-menu fixed">
                                <div class="tit">停车管理</div>
                                <dl>
                                    <!-- <dd>
                                        <a href="/sfsairport/lwszsq/tiaoz.html"><i class="iconfont icongengduo"></i>来往智慧市区</a>
                                    </dd>
                                    <dd>
                                        <a href="/sfsairport/lwgdgd/tiaogj.html"><i class="iconfont icongengduo"></i>来往广东各地</a>
                                    </dd>
                                    <dd>
                                        <a href="/sfsairport/lwga/tiaoz.html"><i class="iconfont icongengduo"></i>来往港澳</a>
                                    </dd> -->
                                    <dd>
                                        <a href="/sfsairport/tcczy/dlm_tt.html"><i class="iconfont icongengduo"></i>停车场指引</a>
                                    </dd>
                                    <!-- <dd>
                                        <a href="/sfsairport/hjl/tiaogj.html"><i class="iconfont icongengduo"></i>城市候机楼</a>
                                    </dd> -->
                                    
                                </dl>
                            </div>
                        </div>
                    </li>
                    <li class="hidejcbx"><a href="/sfsairport/jcbx/show-repair.html"  target="_self">机场报修</a>
                        <div class="erji ">
                            <div class="erji-menu fixed">
                                <div class="tit">机场报修</div>
                                <dl>
                                    
                                    <dd>
                                        <a href="/sfsairport/jcbx/show-repair.html"><i class="iconfont icongengduo"></i>显示报修信息</a>
                                    </dd>
                                   
                                    
                                </dl>
                            </div>
                        </div>
                    </li>
                    <li class="hidejcsy"><a href="/sfsairport/msmk/Dining.html"  target="_self">机场商业</a>
                        <div class="erji ">
                            <div class="erji-menu fixed">
                                <div class="tit">机场商业</div>
                                <dl>
                                    <dd>
                                        <a href="/sfsairport/msmk/Dining.html"><i class="iconfont icongengduo"></i>美食每刻</a>
                                    </dd>
                                        
                                    
                                </dl>
                            </div>
                        </div>
                    </li>
                    <li class="hideyhsc"><a href="/sfsairport/yhsc/introduction.html"  target="_self">用户手册</a>
                        <div class="erji ">
                            <div class="erji-menu fixed">
                                <div class="tit">用户手册</div>
                                <dl>
                                    <dd>
                                        <a href="/sfsairport/yhsc/introduction.html"><i class="iconfont icongengduo"></i>用户手册</a>
                                    </dd>
                                        
                                    
                                </dl>
                            </div>
                        </div>
                    </li>
                    <li class="hidemy"><a href="/sfsairport/wd/gkgrzx/CustomerPersonalCenter.html"  target="_self">我的</a>
                        <div class="erji ">
                            <div class="erji-menu fixed">
                                <div class="tit">我的</div>
                                <dl>
                                    <dd class="hidegkgrzx">
                                        <a href="/sfsairport/wd/gkgrzx/CustomerPersonalCenter.html"><i class="iconfont icongengduo"></i>顾客个人中心</a>
                                    </dd>
                                    <dd class="hidesjgrzx">
                                        <a href="/sfsairport/wd/sjgrzx/shoperAdd.html"><i class="iconfont icongengduo"></i>商家个人中心</a>
                                    </dd>
                                    <dd class="hideglzgrzx">
                                        <a href="/sfsairport/wd/glygrzx/manager.html"><i class="iconfont icongengduo"></i>管理者个人中心</a>
                                    </dd>
                                    <dd class="hidehsgrzx">
                                        <a href="/sfsairport/wd/hsgrzx/Add.html"><i class="iconfont icongengduo"></i>航司个人中心</a>
                                    </dd>
                                    <dd class="hidegzrygrzx">
                                        <a href="/sfsairport/wd/gzrygrzx/new-repair.html"><i class="iconfont icongengduo"></i>工作人员个人中心</a>
                                    </dd>
                                </dl>
                            </div>
                        </div>
                    </li>
                    
                </ul>
                    
            </div>
        </div>
        <!--手机端导航按钮 start-->
        <a href="javascript:;" class="btn-nav">
            <span class="icon-bar top"></span>
            <span class="icon-bar middle"></span>
            <span class="icon-bar bottom"></span>
        </a>
        <div class="nav-box">
            <nav id="menuWapw">
                <ul class="fixed">
                    <li><span><a href="/sfsairport/index.html">首页</a></span></li>
                    <li class="cur">
                        <span><a href="/sfsairport/hbxx/Departure_Arrival.html"  target="_self">航班信息</a><em><i class="iconfont iconxiala"></i></em></span>

                        <ul>
                            <li><span>
                                <a href="/sfsairport/hbxx/Departure_Arrival.html"  target="_self">出发航班</a></span>
                            </li>
                            
                            <li class="hidegp"><span>
                                <a href="/sfsairport/gp/Airlines.html"  target="_self">购票</a></span>
                            </li>
                        </ul>
                   
                    </li>
                    <li>
                        <span><a href="/sfsairport/tcczy/dlm_tt.html"  target="_self">停车管理</a><em><i
                                    class="iconfont iconxiala"></i></em></span>
                        <ul>
                            <!--    -->
                            <li><span>
                                <a href="/sfsairport/tcczy/dlm_tt.html"  target="_self">停车场指引</a></span>
                            </li>
                            <!--     -->
                        </ul>
                    </li>
                    <li class="hidejcbx">
                        <span><a href="/sfsairport/jcbx/show-repair.html"  target="_self">机场报修</a><em><i
                                    class="iconfont iconxiala"></i></em></span>
                        <ul>
                            
                            <li><span>
                                <a href="/sfsairport/jcbx/show-repair.html"  target="_self">显示报修信息</a></span>
                            </li>
                            
                        </ul>
                    </li>
                    <li class="hidejcsy">
                        <span><a href="/sfsairport/msmk/Dining.html"  target="_self">机场商业</a><em><i
                                    class="iconfont iconxiala"></i></em></span>
                        <ul>
                            <li><span>
                                <a href="/sfsairport/msmk/Dining.html"  target="_self">美食每刻</a></span>
                            </li>
                             
                        </ul>
                    </li>
                    <li class="hideyhsc">
                        <span><a href="/sfsairport/yhsc/introduction.html"  target="_self">用户手册</a><em><i
                                    class="iconfont iconxiala"></i></em></span>
                        <ul>
                            <li><span>
                                <a href="/sfsairport/yhsc/introduction.html"  target="_self">用户手册</a></span>
                            </li>
                             
                        </ul>
                    </li>
                    <li class="hidemy">
                        <span><a href="/sfsairport/wd/gkgrzx/CustomerPersonalCenter.html"  target="_self">我的</a><em><i
                                    class="iconfont iconxiala"></i></em></span>
                        <ul>
                            <li class="hidegkgrzx"><span>
                                <a href="/sfsairport/wd/gkgrzx/CustomerPersonalCenter.html"  target="_self">顾客个人中心</a></span>
                            </li>
                            <li class="hidesjgrzx"><span>
                                <a href="/sfsairport/wd/sjgrzx/shoperAdd.html"  target="_self">商家个人中心</a></span>
                            </li>
                            <li class="hideglzgrzx"><span>
                                <a href="/sfsairport/wd/glygrzx/manager.html"  target="_self">管理者个人中心</a></span>
                            </li>
                            <li class="hidehsgrzx"><span>
                                <a href="/sfsairport/wd/hsgrzx/Add.html"  target="_self">航司个人中心</a></span>
                            </li>
                            <li class="hidegzrygrzx"><span>
                                <a href="/sfsairport/wd/gzrygrzx/new-repair.html"  target="_self">工作人员个人中心</a></span>
                            </li>
                        </ul>
                    </li>
                    
                    
                   
                </ul>
            </nav>
            <!--    <div class="wap-top-lx">
                <i class="iconfont iconicon-kefu"></i>24小时服务热线：
                <a href="tel:0755-23456789">
                    0755-23456789
                </a>
            </div> --> 
        </div>
        <!--手机端导航按钮 end-->
    </div>
</div> 
        </header>
        <!--首页banner start-->
        <div class="banner">
            <div class="swiper-container">
                <div class="swiper-wrapper">
                    <div class="swiper-slide">
                        <div class="bg-box">
                            <!-- <img src="/sfsairport/xhtml/./images/banner-wap-pic-01.jpg" /> -->
                            <img src="./binzhirugui.jpg" />
                        </div>
                        <div class="wap-box">
                            <img src="./binzhirugui.jpg" />
                        </div>
                        <div class="banner-content">
                            <div class="m-width-1400 fixed">
                                <div class="text">
                                    <div class="line"></div>
                                    <!-- <h2>
                                        从心出发<em>●</em>连通世界
                                        <span>From the heart，to the world</span>
                                    </h2> -->
                                    <h2>
                                        宾至如归<em>●</em>驰名中外
                                        <span>Stayed homely，Renowned worldwide</span>
                                    </h2>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="swiper-slide">
                        <div class="bg-box">
                            <!-- <img src="/sfsairport/xhtml/./images/index-pic-01.jpg" /> -->
                            <img src="./changxingwuzu.jpg" />
                        </div>
                        <div class="wap-box">
                            <img src="./changxingwuzu.jpg" />
                        </div>
                        <div class="banner-content">
                            <div class="m-width-1400 fixed">
                                <div class="text">
                                    <div class="line"></div>
                                    <!-- <h2>
                                        从心出发<em>●</em>连通世界
                                        <span>From the heart，to the world</span>
                                    </h2> -->
                                    <h2>
                                        畅行无阻<em>●</em>使命必达
                                        <span>Unimpeded Passage，Mission Accomplished</span>
                                    </h2>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
                <!-- Add Pagination -->

                <div class="swiper-pagination m-width-1400"></div>

            </div>

        </div>

        <div id="flightTableContainer" class="head-table1" style="width: 535px;height: 400px;position:fixed;top: 150px;right:10px; z-index: 9; ;background-color: white;border-radius: 12px;">
            <div class="tit" style="margin-left: 20px;margin-bottom: -32px;margin-top: 20px;">
                <h3 style="font-weight: 900;line-height: 1;font-size: 132%;">临近航班</h3>
            </div>
            <div class="head-tab-box" style="padding-left: 20px;padding-right: 20px;padding-top: 50px;">
                <div class="head-item fixed">
                    <a id="showOneHourFlightTakeoff" class="cur">出发</a>
                    <a>到达</a>
                </div>
                <div class="head-tab-content">

                    <div class="tab-block">
                        <table>
                            <thead>
                            <tr>
                                <th width="60">时间</th>
                                <th width="120">航空公司</th>
                                <th>航班号</th>
                                <th>目的地</th>
                                <th width="60">登机口</th>
                            </tr>
                            </thead>
                            <tbody id="Departures">
                                
                            </tbody>
                            
                        </table>
                    </div>
                    <div class="tab-block" style="display:none;">
                        <table>
                            <thead>
                                <tr>
                                    <th width="60">时间</th>
                                    <th width="120">航空公司</th>
                                    <th>航班号</th>
                                    <th>出发地</th>
                                    <th width="60">登机口</th>
                                </tr>
                            </thead>
                            <tbody id="Arrivals">
                                
                            </tbody>
                        </table>
                    </div>
                </div>
                <!-- content--end -->
            </div>
        </div>

</footer>

<script>

    // async function fetchData() {
    //     fetch("http://101.42.178.149/api/FlightInfo/ShowUserFlight",{
    //         method: 'POST',
    //         headers: {
    //             'Content-Type': 'application/json'
    //         }
    //     })
    //         .then(function (response) {
    //         if (response.ok) {
    //             return response.json();
    //         } else {
    //             throw new Error("Error: " + response.status);
    //         }
    //         })
    //         .then(function (data) {
    //         updateTable(data.takeoff_flights);
    //         })
    //         .catch(function (error) {
    //         console.log("Failed to fetch flight data:", error);
    //         });
    // }

    function formatTime(time) {
            var timeParts = time.split(":");
            var hour = parseInt(timeParts[0]);
            var minute = parseInt(timeParts[1]);
            
            // 处理小时
            var formattedHour = hour < 10 ? "0" + hour : hour.toString();
            
            // 处理分钟
            var formattedMinute = minute < 10 ? "0" + minute : minute.toString();
            
            // 返回格式化后的时间字符串
            return formattedHour + ":" + formattedMinute;
        }

    function updateTable(data) {
        var tbody = $("#Departures");
        var rows = tbody.find("tr");

        // 渐变隐藏旧的数据
        rows.removeClass("active");
        setTimeout(function () {
            rows.remove();
            addNewRows(data);
        }, 500);
    }

   
    function addNewRows(data) {
        var tbody = $("#Departures");
        var rows = [];

        data.forEach(function (flight) {
            var str = flight.takeoff_date
            var time = str.split('-')[1]
            var row = $('<tr>\
            <td>' + formatTime(time) + '</td>\
            <td>' + flight.company_id + '</td>\
            <td>' + flight.flight_id + '</td>\
            <td>' + flight.destination + '</td>\
            <td>' + flight.port + '</td>\
            </tr>');
            rows.push(row);
        });

        // 添加新的数据并渐变显示
        tbody.append(rows);
        setTimeout(function () {
            rows.forEach(function (row) {
            row.addClass("active");
            });
        }, 100);
    }




    async function fetchData() {
  try {
    const response = await fetch("http://101.42.178.149/api/FlightInfo/ShowUserFlight", {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      }
    });
    if (!response.ok) {
      throw new Error("Error: " + response.status);
    }
    const data = await response.json();
    fadeOutTable(() => {
      clearTable();
      updateTable(data.takeoff_flights);
      fadeInTable();
    });
  } catch (error) {
    console.log("Failed to fetch flight data:", error);
  }
}

function clearTable() {
  $("#Departures tbody").empty();
}

function fadeOutTable(callback) {
  $("#Departures").fadeOut(500, callback);
}

function fadeInTable() {
  $("#Departures").fadeIn(500);
}

//////////////////////////////////////////////////


function updateTable2(data) {
        var tbody = $("#Arrivals");
        var rows = tbody.find("tr");

        // 渐变隐藏旧的数据
        rows.removeClass("active");
        setTimeout(function () {
            rows.remove();
            addNewRows2(data);
        }, 500);
    }

   
    function addNewRows2(data) {
        var tbody = $("#Arrivals");
        var rows = [];

        data.forEach(function (flight) {
            var str = flight.takeoff_date
            var time = str.split('-')[1]
            var row = $('<tr>\
            <td>' + formatTime(time) + '</td>\
            <td>' + flight.company_id + '</td>\
            <td>' + flight.flight_id + '</td>\
            <td>' + flight.departure + '</td>\
            <td>' + flight.port + '</td>\
            </tr>');
            rows.push(row);
        });

        // 添加新的数据并渐变显示
        tbody.append(rows);
        setTimeout(function () {
            rows.forEach(function (row) {
            row.addClass("active");
            });
        }, 100);
    }




    async function fetchData2() {
  try {
    const response = await fetch("http://101.42.178.149/api/FlightInfo/ShowUserFlight", {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      }
    });
    if (!response.ok) {
      throw new Error("Error: " + response.status);
    }
    const data = await response.json();
    fadeOutTable2(() => {
      clearTable2();
      updateTable2(data.arrive_flights);
      fadeInTable2();
    });
  } catch (error) {
    console.log("Failed to fetch flight data:", error);
  }
}

function clearTable2() {
  $("#Arrivals tbody").empty();
}

function fadeOutTable2(callback) {
  $("#Arrivals").fadeOut(500, callback);
}

function fadeInTable2() {
  $("#Arrivals").fadeIn(500);
}




    $(document).ready(function () {
        fetchData();
        setInterval(fetchData, 5000);
        
    });

    $(document).ready(function () {
        fetchData2();
        setInterval(fetchData2, 5000);
        
    });

// // 找到<tbody>元素
// var tbody = document.getElementById("Departures");

// // 清空<tbody>中的内容
// tbody.innerHTML = "";

// 遍历航班信息数组，创建并添加<tr>行到<tbody>中
// flights.forEach(function(flight) {
//   var row = document.createElement("tr");
  
//   var timeCell = document.createElement("td");
//   timeCell.textContent = flight.time;
//   row.appendChild(timeCell);
  
//   var airlineCell = document.createElement("td");
//   airlineCell.textContent = flight.airline;
//   row.appendChild(airlineCell);
  
//   var flightNumberCell = document.createElement("td");
//   flightNumberCell.textContent = flight.flightNumber;
//   row.appendChild(flightNumberCell);
  
//   var destinationCell = document.createElement("td");
//   destinationCell.textContent = flight.destination;
//   row.appendChild(destinationCell);
  
//   var statusCell = document.createElement("td");
//   statusCell.textContent = flight.status;
//   row.appendChild(statusCell);
  
//   tbody.appendChild(row);

// });



</script>





<div class="right-fix">
    <!-- <a href="https://znkf-im.sfsairport.com/user-iframe.html?channel_key=0a7e572d89773315ca55ba49e8e035eb&init=1" class="kefu" target = "_blank">
        <i class="iconfont iconkefu"></i>
    </a> -->
    <a href="javascript:;" id="toTop">
        <i class="iconfont iconzhiding"></i>
    </a>
</div>
<!-- right-fix--end -->




<script>

layui.use(['layer', 'form'], function () {
    var layer = layui.layer,
        form = layui.form;
    // $('.right-fix .kefu').click(function(){
    //     formWrite();
    // });
    $('.onlinemsg').click(function(){
        formWrite();
    });
    //表单弹窗
    var indexLayer=null;
    function formWrite(){
        indexLayer = layer.open({
            type: 1,
            shade: 0.6,
            closeBtn: 0,
            skin: 'notice-class',
            area: 'auto',
            maxWidth:800,
            title: false, //不显示标题
            content: $('.layer_notice'), //捕获的元素，注意：最好该指定的元素要存放在body最外层，否则可能被其它的相对元素所影响
            success: function (layero, index) {

            }
        });
    }

    //提交成功以后的弹窗
    var alertLayer=null;
    function formSuccess(){
        alertLayer = layer.open({
            type: 1,
            shade: 0.6,
            closeBtn: 0,
            skin: 'notice-class',
            area: ['auto'],
            maxWidth:800,
            title: false, //不显示标题
            content: $('.layer_notice_alert'), //捕获的元素，注意：最好该指定的元素要存放在body最外层，否则可能被其它的相对元素所影响
            success: function (layero, index) {

            }
        })
    }

    //自定义验证规则
    form.verify({
        Information: function(value){
            if(value.length < 5){
                return 'Information至少得2个字符';
            }
        }

    });
    //监听提交
     form.on('submit(formDemo)', function(data){

        data.field.token = window.localStorage.getItem('token')
        console.log(JSON.stringify(data.field),'最终的提交信息');
        layer.close(indexLayer);
        var jsonData = JSON.stringify(data.field)
      $.ajax({
        url:"http://101.42.178.149/api/extra/submitProblem",
        type:"post",
        data:jsonData,
        dataType:"json",
        success:function(data){console.log(data);}
      
      })
      
        formSuccess();
        return false;
    });
    //弹窗一的关闭效果
    $('.layer-not-close1,.close-lay-btn').click(function(){
        layer.close(indexLayer);
    });
    //弹窗二的关闭效果
    $('.layer-not-close2').click(function(){
        layer.close(alertLayer);
    });
});

</script>

<script type="text/javascript">
    //请配置domain 和 fullUrl 参数，user为test是本机测试环境，正式环境改为official,输出位置id为visitCount
    var visitConfig = {
            api : {
                test : '',
                official  : '/u/visit/count',
                use : 'official',
                domain : 'http://www.sfsairport.com',
                fullUrl: 'http://www.sfsairport.com/sfsairport/index.html',
                showId : 'fwl'
            }
    };
</script>
<script src="/u/res/skin/visits/count.js"></script>
<!-- <script src="/sfsairport/xhtml/js/sfsairport.js"></script> -->
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?b6bc2190e8acb64154f3ec1c5c8a45b3";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
        <!-- footer and right fixed end -->
    </div>
  <script type="text/javascript" src="/sfsairport/xhtml/js/aos.js"></script>
    <script type="text/javascript" src="/sfsairport/xhtml/js/index.js"></script>


    <script>
        $(document).ready(function () {
            // 启动定时器，每隔一定时间获取tbody的高度并调整表格容器的高度
            setInterval(updateTableContainerHeight, 1000); // 每隔1秒钟执行一次

            // 其他初始化代码...
        });

        function updateTableContainerHeight() {
            var tbody
            if($('#showOneHourFlightTakeoff').hasClass('cur')){
                tbody = $("#Departures");
            }else{
                tbody = $("#Arrivals");
            }
            
            var tableContainer = $("#flightTableContainer");

            // 获取tbody的高度
            var tbodyHeight = tbody.height();
            // 设置表格容器的高度
            var newHeight = parseFloat(tbodyHeight) + 155.8;
            tableContainer.height(newHeight);
            console.log('tbody高度为:'+tbodyHeight)
            console.log('容器高度为:'+tableContainer.height())
    }

    </script>

    <script src="./xhtml/js/type.js"></script>

</body>

</html>